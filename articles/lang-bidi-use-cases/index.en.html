<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Use cases for bidi and language metadata on the Web</title>
<meta name="description" content="Use cases for bidi and language metadata on the Web." />
<script>
var f = { }

// AUTHORS should fill in these assignments:
f.directory = 'articles/vertical-text'+'/'; // the name of the directory this file is in
f.filename = 'index' // the file name WITHOUT extensions
f.authors = 'Richard Ishida, W3C' // author(s) and affiliations
f.previousauthors = '' // as above
f.modifiers = '' // people making substantive changes, and their affiliation
f.searchString = 'article-vertical-text' // blog search string - usually the filename without extensions
f.firstPubDate = '2017-03-13' // date of the first publication of the document (after review)
f.lastSubstUpdate = { date:'2017-03-13', time:'13:53'}  // date and time of latest substantive changes to this document
f.status = 'published'  // should be one of draft, review, published, or notreviewed
f.path = '../../' // what you need to prepend to a URL to get to the /International directory 

// AUTHORS AND TRANSLATORS should fill in these assignments:
f.thisVersion = { date:'2017-03-13', time:'13:53'} // date and time of latest edits to this document/translation
f.contributors = '' // people providing useful contributions or feedback during review or at other times
// also make sure that the lang attribute on the html tag is correct!

// TRANSLATORS should fill in these assignments:
f.translators = 'xxxNAME, ORG' // translator(s) and their affiliation - a elements allowed, but use double quotes for attributes
f.translatorContact="" // please add email. This is not displayed, it allows the translation coordinator to contact you if needed in future.

f.breadcrumb = 'styling'

f.additionalLinks = ''
</script>
<script src="index-data/translations.js"> </script>
<script src="../../javascript/doc-structure/article-dt.js"> </script>
<script src="../../javascript/boilerplate-text/boilerplate-en.js"> // TRANSLATORS must change -en to the subtag for their language! </script>  
<script src="../../javascript/doc-structure/article.js"> </script>
<script type="text/javascript" src="../../javascript/articletoc-html5.js"></script>
<link rel="stylesheet" href="../../style/article-2016.css" />
<link rel="stylesheet" href="index-data/local.css" />
<link rel="copyright" href="#copyright"/>
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<style>
.flexAnnotation .demolink {
    font-size: 70%;
    position: absolute;
    bottom: 0.5em;
    right: 1em;
	margin: 0;
	}
figure pre {
	margin: 16px 0 0 0;
	}
#testlinks td, #testlinks th { text-align: start; border: 0; padding: 0 0 0 30px; }
</style>
</head>

<body>
<header>
<nav id="mainNavigation"></nav><script>document.getElementById('mainNavigation').innerHTML = mainNavigation</script>

<h1>Use cases for bidi and language metadata on the Web</h1>
</header>

<section>
    <div id="audience"> 
        <div id="updateInfo"></div><script>document.getElementById('updateInfo').innerHTML = g.updated</script>
    </div>
    
    <p>The W3C Internationalisation Group recommends that data formats and string data are always associated with information about text direction and language. This is to ensure that the data can be correctly managed when displayed to a user. This article explores use cases that substantiate the need for this type of information.</p>
  <p>&nbsp;</p>
</section>
        
        


<section>
<h2 id="examples">Examples</h2>

<section>
<h3 id="ebook_example">E-book catalogue</h3>

<p>Suppose that you are building a Web page to show a 
customer's library of e-books. The e-books exist in a catalog of data 
and consist of the usual data values. A JSON file for a single entry 
might look something like:</p>

<div class="figWrXXXap">
<figure id="fig_example">
<!--
 Title below is actually "HTML and CSS: Design and Build Websites"
 ASIN: 1118871642
 ISBN-13: 978-1118871645
 ISBN-10: 1118871642
-->
<pre>
{
    "id": "978-111887164-5",
    "title": "<span dir="rtl">HTML &#x0648; CSS: &#x062A;&#x0635;&#x0645;&#x064A;&#x0645; &#x0648; &#x0625;&#x0646;&#x0634;&#x0627;&#x0621; &#x0645;&#x0648;&#x0627;&#x0642;&#x0639; &#x0627;&#x0644;&#x0648;&#x064A;&#x0628;</span>",
    "authors": [ "Jon Duckett" ],
    "language": "ar",
    "pubDate": "2008-01-01",
    "publisher": "مكتبة",
    "coverImage": "https://example.com/images/html_and_css_cover.jpg",
    // etc.
},
</pre>
<figcaption>An example of data containing strings that need direction and language metadata.</figcaption>
</figure>
</div>

<p>Each of the above is a data field in a database somewhere. Note that the language information provided (<code class="kw" translate="no">"language": "ar"</code>) indicates the language of the book, not  the language of the text in the database record.</p>

<p>A well-internationalized catalog would include additional metadata 
to what is shown above. That is, for each of the fields containing 
natural language text, such as the <kbd>title</kbd> and 
<kbd>authors</kbd> fields, there should be language  and base 
direction information stored as metadata. (There may be other values as well, such 
as pronunciation metadata for sorting East Asian language information.) 
These metadata values are used by consumers of the data to influence the processing 
and enable the display of the items in a variety of ways. As the JSON data structure 
provides no place to store or exchange these values, it is more difficult
to construct internationalized applications.</p>
</section>




<section>
<h3 id="example2">Annotated manuscripts</h3>

<p>Kitayama-san is reading an old Tibetan manuscript from the Dunhuang 
collection. The tool he is using to read the manuscript has access 
to annotations created by scholars who are commenting on the 
text, and who are working in the various languages 
of the International Dunhuang Project.  </p>
<p>The section of the manuscript he is currently looking at has 
commentaries by people writing in Chinese, Japanese, and Russian. 
Each of these commentaries is stored in a separate  annotation, but 
the annotations point to the same point in the target document.</p>
<p>Each commentary is mainly written in the language of the scholar, 
but may contain excerpts from the manuscript and other sources 
written in Tibetan, as well as quoted text in Chinese and English. Some 
commentaries may contain parallel annotations, each in a different 
language. For example, there are some with the same text translated 
into Japanese, Chinese and Tibetan.</p>

<p>Kitayama-san speaks Japanese, so he generally wants to be presented with the 
Japanese commentary.</p>
</section>





<section>
<h2 id="definitions">Definitions</h2>

<p><dfn id="def_langmeta">Language metadata</dfn> typically indicates the 
intended linguistic audience or user of the resource as a whole, and 
it's possible to imagine that this could, for a multilingual resource, 
involve a property value that is a list of languages. A property that 
is about language metadata may have more than one value, since it aims 
to describe all potential users of the information</p>

<p>The <dfn id="def_tpl">text-processing language</dfn> is the language of a 
particular range of text (which could be a whole resource or just part 
of it). A property that represents the text-processing language needs 
to have a single value, because it describes the text content in such a 
way that tools such as spell-checkers, default font applicators, 
hyphenation and line breakers, case converters, voice browsers, and 
other language-sensitive applications know which set of rules or 
resources to apply to a specific range of text. Such applications 
generally need an unambiguous statement about the language they are 
working on.</p>
<p><dfn id="def_base_direction">Base direction</dfn> determines the general arrangement and progression of content when bidirectional text is displayed. The Unicode Bidirectional Algorithm (UBA) is primarily focused on arranging adjacent characters, based on character properties. Base direction works at a higher level, and dictates (a) the visual order and direction in which runs of strongly-typed LTR and RTL character are displayed, and (b) where there are weakly-typed characters such as punctuation, the placement of those items relative to the other content.</p>
<p><dfn id="def_language_negotiation">Language negotiation</dfn> is any process which selects or filters content based on language. Usually this implies selecting content in a single language (or falling back to some meaningful default language that is available) by finding the best matching values when several languages or locales [LTLI] are present in the content. Some common language negotiation algorithms include the Lookup algorithm in [BCP47] or the BestFitMatcher in [ECMA-402].</p>
</section>






<section>
<h2 id="language_identification">Identifying the Language of Content</h2>

 
 
 
    
 <section id="language_metadata">
   <h3>Capturing the language of the audience</h3>
   <p>Kitayama-san wants to find manuscript annotations in Japanese (see the <a href="#example2">example</a> above).</p>
<p>The annotations containing the Japanese commentary have a <code class="kw" translate="no">language</code> property set to &quot;<code class="kw" translate="no">ja</code>&quot; (Japanese). The tool he is using knows that he wants to read the Japanese commentaries, and it uses the metadata attached to the annotations to select and present to him the text that is available in Japanese.  This is language information being used as metadata about the <em>intended audience</em> – it indicates to the application doing the retrieval that the intended consumer of the information  is someone who wants Japanese content.</p>
    
   <p>Some of the annotations contain text in more than one language. 
   For example, there are several with commentary in  Chinese, Japanese, 
   and Tibetan. For these annotations, it's appropriate to set the 
   <code class="kw" translate="no">language</code> property to 
   &quot;<code class="kw" translate="no">ja,zh,bo</code>&quot; – 
   indicating that all of Japanese, Chinese, and Tibetan readers may want to find 
   it.</p> <p>The language tagging that is happening here is likely to 
   be at the resource level, rather than the string level.</p>
 </section>



<section>
<h3 id="text_processing">Capturing the text-processing language</h3>  
  <p>Having identified the relevant annotation text to present to 
    Kitayama-san, his application has to then display it so that he can read it. 
    It's important to apply the correct font to the text. In the figure just below, the first line is labeled <code class="kw" translate="no">ja</code> 
    (<em>Japanese</em>), and the second <code class="kw" translate="no">zh-Hant</code> (<em>Traditional 
    Chinese</em>), respectively. The characters on both lines  are the same code points, but the reader expects to see systematic differences between how those  codepoints are rendered in Japanese vs. Chinese. It's important to associate the right forms with the right language, otherwise you can make the reader uncomfortable or possibly unhappy.</p>
 
<div class="figWrap">
<figure id="fig_ja_zh_fonts">
  <p class="cjk-demo"><img src="index-data/ja_zh_fonts.png" alt="雪, 刃, 直, 令, 垔"></p>
  <!--p class="cjk-demo"> 雪, 刃, 直, 令, 垔 </p>
  <p class="cjk-demo" lang="ja"> 雪, 刃, 直, 令, 垔 </p>
  <p class="cjk-demo" lang="zh-Hans"> 雪, 刃, 直, 令, 垔 </p>
  <p class="cjk-demo" lang="zh-Hant"> 雪, 刃, 直, 令, 垔 </p-->
  <figcaption>The same code points, displayed with a Japanese (top) and Chinese (bottom) font.</figcaption>
  </figure>
  </div>
  
  
  <p>So, it's important to apply a Japanese font to 
	the Japanese text that Kitayama-san is reading. There are also 
	language-specific differences in the way text is wrapped at the end 
	of a line. For these reasons we need to identify the actual 
	language of the text to which the font or the wrapping algorithm 
	will be applied.</p>
	
	<p>Another consideration that might apply is the use of 
	text-to-speech. A voice browser will need to know whether to use 
	Japanese or Chinese pronunciations, voices, and dictionaries for the ideographic characters 
	contained in the annotation body text.</p>
	
	<p>Various other text rendering or analysis tools need to know 
	the language of the text they are dealing with. Many different types of text processing depend on information about the language of the content in order to provide the proper processing or results and this goes beyond mere presentation of the text. For example, if Kitayama-san wanted to search for an annotation, the application might provide a full text search capability. In order to index the words in the annotations, the application would need to split the text according to word boundaries. In Japanese and Chinese, which do not use spaces in-between words, this often involves using dictionaries and heuristics that are language specific.</p>
    
    <p>We also need a way to indicate the change of language to Chinese and 
    Tibetan later in the commentary for some annotations, so that 
    appropriate fonts and wrapping algorithms can be applied there.</p>
<p> It's 
   possible that the text-processing language for strings 
   inside the resource may be assumed by looking at the resource level 
   language tag we mentioned earlier, which indicates the target audience – but only if it is a single language tag. If the tag 
   contains &quot;<code class="kw" translate="no">ja,zh,bo</code>&quot; it's not clear which parts of the text should be treated as if they are in 
Japanese, which are in Chinese, and which are in Tibetan. Therefore, there is a need for additional metadata to indicate the text-processing language to be used for which parts of the text, ideally with a resource-wide declaration as the default and the ability to change the language for appropriate parts of the content.</p>
</section>




<section>
<h3 id="inline_language">Inline language changes</h3>

<p>Changes of language may occur within sentences (or strings in our publishing manifest example), and these changes are also important if we are to apply the correct fonts and styling. There must be some way to indicate where the new text-processing language segment begins and ends.</p>
</section>




<section>
<h3 id="additional_requirements">Additional Requirements for Localization</h3>

<p>Having viewed the commentaries he is interested in, Kitayama-san realizes that he needs another reference work, but he's not sure of the catalog number. He uses an application for searching out catalog entries. This application is written in JavaScript and can be switched between several languages, according to the user preference. One way to accomplish this would be to reload the application's user interface from the server each time the user selects a new language. However, because this application is relatively small, the developer has elected to package all of the translations with the JavaScript (there are several open source projects that allow runtime selection of locale). Similarly, the catalog search service sends records back in all of the available languages, rather than pre-selecting according to the user's current language preference.</p>

<p>The <a href="#ebook_example">e-book catalog example</a> shows a data record available in a single language. But some applications, such as the catalog search tool and its supporting service, might need the ability to send multiple languages for the same field, such as when localizing an application or when multilingual data is available. This is particularly true in cases like this, when the application performs its own <a href="#def_language_negotiation">language negotiation</a> or when the consumer cannot know which language or languages will be selected for display.</p>

<p>Serialization agreements to support this therefore need to represent several different language variations of the same field. For instance, in the e-book example above the values <kbd>title</kbd> or <kbd>description</kbd> might each have translations available for display to users who speak a language other than English. Or an application might have localized strings that the consumer can select at runtime. In some cases, all language variations might be shown to the user. In other cases, the different language values might be matched to user preferences as part of <a href="#def_language_negotiation">language negotiation</a> to select the most appropriate language to show.</p>

<p>When multiple language representations are possible, a serialization might provide a means (defined in the specification for that document format) for setting a default value for language or direction for the whole of the document. This allows the serialized document to omit language and direction metadata from individual fields in cases where they match the default.</p>
</section>
</section>
</section>
        
        
        
<section>
<h2 id="bidi_use_case">Identifying the Base Direction of Content</h2>

  <p>In order for an application to correctly display bidirectional text, such as those in the following use cases, there must be a way for the consumer to determine the required <a href="#def_base_direction">base direction</a> for each string. It is not enough to rely on the Unicode Bidirectional Algorithm to solve these issues. What is needed is a way to establish the overall directional context in which the string will be displayed (which is what 'base direction' means).</p>
<p>These use cases illustrate situations where a failure to apply the necessary base direction creates a problem.</p>


<section>
<h3 id="bidiCase1">Final punctuation</h3>
<p>This use case consists of a string containing Hebrew text followed by punctuation – in this case an exclamation mark. The characters in this string are shown here in the order in which they are stored in memory.</p>
<p lang="he" dir="ltr" style="text-align:center; font-size: 1.8em;"><bdo dir="ltr">בינלאומי!</bdo></p>
<!--p lang="he" dir="rtl" style="text-align:center; font-size: 1.8em;"><code><bdo dir="ltr">&quot;בינלאומי!&quot;</bdo></code></p-->
<p>If the string is dropped into a LTR context, it will display as shown just below, which is incorrect – the exclamation mark is on the wrong side:</p>
<figure>
<p lang="he" dir="ltr" style="font-size: 1.8em; color: grey;">Result: בינלאומי!</p>
</figure>

<p>Dropped into a RTL context, this will be the result, which is correct:</p>
<figure>
<p lang="he" dir="rtl" style="font-size: 1.8em; color: grey;">תוצאה: בינלאומי!</p>
</figure>

<p>The Hebrew characters are automatically displayed right-to-left by applying the Unicode Bidirectional Algorithm (UBA). However, in a LTR context the UBA cannot make the exclamation mark appear to the left of the Hebrew text, where it belongs, unless the base direction is set to RTL around the inserted string.</p>
<p>To achieve this in a LTR context when using HTML insert the string into an element with a <code class="kw" translate="no">dir</code> attribute that has the value <code class="kw" translate="no">rtl</code>. That yields the expected result:</p>
<figure>
<p lang="he" dir="ltr" style="font-size: 1.8em; color: grey;">Result: <span dir="rtl">בינלאומי!</span></p>
</figure>
</section>



<section>
<h3 id="bidiCase2">Initial Latin</h3>
<p>In this case the Hebrew word is preceded by some Latin text (such as a hashtag or @name). The characters in  the order in which they are stored in memory.</p>
<p lang="he" dir="ltr" style="text-align:center; font-size: 1.8em;"><bdo dir="ltr">bidi בינלאומי</bdo></p>

<!--p lang="he" dir="rtl" style="text-align:center; font-size: 1.8em;"><code>
<bdo dir="ltr">&quot;bidi בינלאומי&quot;</bdo></code></p-->
<p>If the string is dropped into a LTR context, it will display like this, which is incorrect – the word 'bidi' should be to the right:</p>
<figure>
<p lang="he" dir="ltr" style="font-size: 1.8em; color: grey;">bidi בינלאומי</p>
</figure>
<p>Dropped into a RTL context, we get the expected result, since the base direction is set to RTL:</p>
<figure>
<p lang="he" dir="rtl" style="font-size: 1.8em; color: grey;">bidi בינלאומי</p>
</figure>

<p>The Hebrew characters are reversed by applying the Unicode Bidirectional Algorithm (UBA). However, in a LTR context the UBA cannot make the word  'bidi' appear to the right of the Hebrew text, where it belongs, unless the base direction is set to RTL around the whole phrase.</p>
<p>Notice how <a href="#base_example">our e-book catalog example</a> demonstrates this. The title of the book was displayed in an LTR context like this:</p>
<figure>
<p lang="ar" dir="ltr" style="font-size: 1.8em; color: grey;">Title: HTML و CSS: تصميم و إنشاء مواقع الويب
</p>
</figure>

<p>However, the title is not displayed properly. The first word in the title is "HTML" and it should show on the right side, like this:</p>
<figure>
<p lang="ar" dir="ltr" style="font-size: 1.8em; color: grey;">Title: <span dir="rtl">HTML و CSS: تصميم و إنشاء مواقع الويب</span></p>
</figure>

<p>This has an additional complication. Often, applications will test the first strong character in the string in order to guess the base direction that needs to be applied. In this case, that heuristic will produce the wrong result.</p>
<p>The example that follows is in a RTL context, but the injected string has been given a base direction based on the first strong directional character, and again the words 'HTML' and 'CSS' `are in the wrong place.</p>
<figure>
<p lang="ar" dir="rtl" style="font-size: 1.8em; color: grey;">عنوان كتاب: <span dir="ltr">HTML و CSS: تصميم و إنشاء مواقع الويب</span></p>
</figure>
</section>




  <section>
  <h3 id="bidiCase3">Bidirectional text ordering</h3>
<p>In this case the string contains three words with different directional properties. Here are the characters in the order in which they are stored in memory.</p>
<p lang="he" dir="ltr" style="text-align:center; font-size: 1.8em;"><bdo dir="ltr">one שתיים three</bdo></p>

<!--p lang="he" dir="rtl" style="text-align:center; font-size: 1.8em;"><code>
<bdo dir="ltr">&quot;one שתיים three&quot;</bdo>
</code></p-->
<p>If the string is dropped into a LTR context, it will display like this:</p>
<figure>
<p lang="he" dir="ltr" style="font-size: 1.8em; color: grey;">one שתיים three</p>
</figure>

<p>Dropped into a RTL context, this will be the result – the order of the items has changed, because the base direction is different:</p>
<figure>
<p lang="he" dir="rtl" style="font-size: 1.8em; color: grey;">one שתיים three </p>
</figure>

<p>If a bidirectional string is inserted into a LTR context without specifying the RTL base direction for the inserted string, it can produce unreadable text. This is an example.</p>
<figure>
<p lang="ar" style="font-size: 1.4em; color: grey; white-space: nowrap;">Translation: في XHMTL 1.0 يتم تحقيق ذلك بإضافة العنصر المضمن bdo.</p>
</figure>

<p>What you should have seen is:</p>
<figure>
<p lang="ar" style="font-size: 1.4em; color: grey; white-space: nowrap;">Translation: <span dir="rtl" lang="ar">في XHMTL 1.0 يتم تحقيق ذلك بإضافة العنصر المضمن bdo.</span></p>
</figure>

<p id="withMarkup">This can be much worse when combined with punctuation, or in this case  markup. Take the following example of source code, presented to a user in an educational context in a RTL page: <code>&lt;span&gt;one שתיים three&lt;/span&gt;</code>. If the  base direction of the string is not specified as LTR, you will see the result below.</p>
<figure>
<p lang="he" dir="rtl" style="font-size: 1.4em; color: grey;">&lt;span&gt;one שתיים three&lt;/span&gt;</p>
</figure>

<p>(This happens because the Unicode bidi algorithm sees <code>span&gt;one</code> as a single directional run, and <code>three&lt;/span</code> as another. The outermost angle brackets are balanced by the algorithm.)</p>
</section>

  <section>
  <h3 id="bidiCase4">Interpreted HTML</h3>
<p>The characters in this string are shown in the order in which they are stored in memory.</p>
<p lang="he" dir="ltr" style="text-align:center; font-size: 1.8em;"><bdo dir="ltr">&lt;span dir='ltr'&gt;one שתיים three&lt;/span&gt;</bdo></p>

<!--p lang="he" dir="rtl" style="text-align:center; font-size: 1.8em;"><code>
<bdo dir="ltr">&quot;&lt;span dir='ltr'&gt;one שתיים three&lt;/span&gt;&quot;</bdo>
</code></p-->
<p>This use case is for applications that will parse the string and convert any HTML markup to the DOM. In this case, the text should be rendered correctly in an HTML context because the <code class="kw" translate="no">dir</code> attribute indicates the base direction to be applied within the markup. (It also applies bidi isolation to the text in browsers that fully support bidi markup, avoiding any spill-over effects.) It relies, however, on a system where the consumer expects to receive HTML, and knows how to handle bidi markup.</p>
<p>It also requires the producer to take explicit action to identify the appropriate base direction and set up the required markup to indicate that.</p>
</section>



<section>
<h3 id="bidiCase5">Neutral LTR text</h3>
<p>The text in this use case could be a phone number, product catalogue number, mac address, etc. The characters in this string are shown in the order in which they are stored in memory.</p>
<p lang="he" dir="ltr" style="text-align:center; font-size: 1.8em;"><bdo dir="ltr">123 456 789</bdo></p>

<!--p lang="he" dir="rtl" style="text-align:center; font-size: 1.8em;"><code><bdo dir="ltr">&quot;123 456 789&quot;</bdo></code></p-->
<p>If the string is dropped into a LTR context, it will display like this, which is correct:</p>
<figure>
<p lang="he" dir="ltr" style="font-size: 1.8em; color: grey;">123 456 789</p>
</figure>

<p>Dropped into a RTL context, you will get the result just below, which is incorrect – the sequencing is wrong, and this may not even be apparent to the reader:</p>
<figure>
<p lang="he" dir="rtl" style="font-size: 1.8em; color: grey;">123 456 789</p>
</figure>

<p>When presented to a user, the order of the numbers must remain the same even when the directional context of the surrounding text is RTL. There are no strong directional characters in this string, and the need to preserve a strong LTR base direction is more to do with the type of information in the string than with the content.</p>
</section>


<section>
<h3 id="bidiCase7">Spill-over effects</h3>
<p>A common use for strings is to provide data that is inserted into a page or user interface at runtime. Consider a scenario where, in a LTR application environment, you are displaying book names and the number of reviews each book has received. The display should produce something ordered like this:</p>
<p lang="he" dir="ltr" style="text-align:center; font-size: 1.8em;"><bdo dir="ltr">$title - $numReviews reviews</bdo></p>

<!--p style="font-size: 1.8em;"><code>$title - $numReviews reviews</code></p-->
<p>Then you insert a book with a title like that in the original example. You would expect to see this:</p>
<figure>
<p lang="ar" dir="ltr" style="font-size: 1.8em; color: grey;"><bdi>HTML: تصميم و إنشاء مواقع الويب</bdi> 
- 4 reviews</p>
</figure>

<p>What you would actually see is this:</p>
<figure>
<p lang="ar" dir="ltr" style="font-size: 1.8em; color: grey;">HTML: تصميم و إنشاء مواقع الويب - 4 reviews</p>
</figure>

<p>This problem is caused by spillover effects as the Unicode bidirectional algorithm operates on the text inside and outside the inserted string without making any distinction between the two.</p>
<p>The solution to this problem is  <a>bidi isolation</a>. The title needs to be directionally isolated from the rest of the text. </p>
</section>




<section>
<h3 id="what_consumers_do">What consumers need to do</h3>
<p>Given the use cases in this section it will be clear that a consumer of strings or database content cannot simply insert a string into a target location without some additional work or preparation taking place, first to establish the appropriate base direction for the string being inserted, and secondly to apply bidi isolation around the string.</p>
<p>This requires the presence of markup or Unicode formatting controls around the string. If the string's base direction is opposite to that into which it is being inserted, the markup or control codes need to tightly wrap the string. Strings that are inserted adjacent to each other all need to be individually wrapped in order to avoid the spillover issues we saw in the previous section.</p>
<p>HTML5 provides base direction controls and isolation for any inline element when the <code class="kw" translate="no">dir</code> attribute is used, or when the <code class="kw" translate="no">bdi</code> element is used. When inserting strings into plain text environments, isolating Unicode formatting characters need to be used.</p>
<p>The trick is to ensure that the direction information provided by the markup or control characters reflects the base direction of the string.</p>
</section>
</section>





<section>
<h2 id="conclusion">Summary</h2>

<p>In summary, when content and strings  are stored in databases there needs to be some way of identifying the language and direction  that they should be associated with. Some of those properties may relate to who is likely to use the information, and some is relevant to making the information appear or behave correctly when presented to the user. This information needs to be available both at the resource level, but also cater for changes within the content, including changes on an item by item basis, but also changes within a string or sentence.</p>
</section>







<section> 
<h2 id="endlinks"><a href="#endlinks">Further reading</a></h2>
<aside class="section" id="survey"> </aside><script>document.getElementById('survey').innerHTML = g.survey</script>

    <ul id="full-links">
      <li>
        <p><cite><a href="https://www.w3.org/TR/css-writing-modes-3/">CSS Writing Modes Level 3</a></cite></p>
        
      </li>
      <li>
          <p>Related links, <cite>Authoring HTML &amp; CSS</cite></p>
          <ul>
      <li><a href="https://www.w3.org/International/techniques/authoring-html?collapse&amp;open=direction">Text direction</a></li>
      <li><a href="https://www.w3.org/International/techniques/authoring-html#sec_verticaltext">Vertical text</a></li>
      </ul>
      </li>
    </ul>
</section>

<footer id="thefooter"></footer><script type="text/javascript">document.getElementById('thefooter').innerHTML = g.bottomOfPage</script>
<script type="text/javascript">completePage()</script>
</body>
</html>

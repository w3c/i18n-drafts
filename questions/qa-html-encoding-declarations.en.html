<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Declaring character encodings in HTML</title>
<meta name="description" content="How should I declare the encoding of my HTML5 file?" />
<script>
var f = { }

// AUTHORS should fill in these assignments:
f.directory = 'questions'+'/'; // the path to this file, not including /International or the file name
f.filename = 'qa-html-encoding-declarations'; // the file name WITHOUT extensions
f.authors = 'Richard Ishida, W3C'; // author(s) and affiliations
f.previousauthors = ''; // as above
f.modifiers = ''; // people making substantive changes, and their affiliation
f.searchString = 'qa-html-encoding-declarations'; // blog search string - usually the filename without extensions
f.firstPubDate = '2010-09-09'; // date of the first publication of the document (after review)
f.lastSubstUpdate = { date:'2014-02-26', time:'11:49'}  // date and time of latest substantive changes to this document
f.status = 'published';  // should be one of draft, review, published, notreviewed or obsolete
f.path = '../' // what you need to prepend to a URL to get to the /International directory 

// AUTHORS AND TRANSLATORS should fill in these assignments:
f.thisVersion = { date:'2016-01-27', time:'08:19'} // date and time of latest edits to this document/translation
f.contributors = 'Henri Sivonen, Gunnar Bittersmann'; // people providing useful contributions or feedback during review or at other times
// also make sure that the lang attribute on the html tag is correct!

// TRANSLATORS should fill in these assignments:
f.translators = 'xxxNAME, ORG'; // translator(s) and their affiliation - a elements allowed, but use double quotes for attributes

f.breadcrumb = 'characters';

f.additionalLinks = ''
</script>
<script src="qa-html-encoding-declarations-data/translations.js"> </script>
<script src="../javascript/doc-structure/article-dt.js"> </script>
<script src="../javascript/boilerplate-text/boilerplate-en.js"></script><!--TRANSLATORS must change -en to the subtag for their language!-->
<script src="../javascript/doc-structure/article.js"> </script>
<script src="../javascript/articletoc-html5.js"></script>
<link rel="stylesheet" href="../style/article-2016.css" type="text/css" />
<link rel="copyright" href="#copyright"/>
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
<header> 
  <nav id="mainNavigation"></nav><script>document.getElementById('mainNavigation').innerHTML = mainNavigation</script>

  <h1>Declaring character encodings in HTML</h1>
</header>


<section>
  <div id="audience">
    <p><span id="intendedAudience" class="leadin">Intended audience:</span> 
    HTML authors (using editors or scripting), script developers (PHP, JSP, etc.),  Web project managers, and anyone who  needs an introduction to how to declare the character encoding of their HTML  file.</p>
    <div id="updateInfo"></div><script>document.getElementById('updateInfo').innerHTML = g.updated</script>
    </div>

    <h2 id="question"><a href="#question">Question</a></h2>
    <p class="question">How should I declare the encoding of my HTML file?</p>

  <p>You should always specify the encoding used for an HTML or XML page. If you don't, you risk  that characters in your content are  incorrectly interpreted. This is not just an issue of human readability, increasingly machines need to understand your data too. A character encoding declaration is also needed to process non-ASCII characters entered by the user in forms, in URLs generated by scripts, and so forth. This article describes how to do this for an HTML file.</p>
  <p>If you need to better understand what characters and character encodings are, see the article <a class="print" href="/International/questions/qa-what-is-encoding"><cite>Character encodings for beginners</cite></a>. For information about declaring encodings for CSS style sheets, see <a class="print" href="/International/questions/qa-css-charset"><cite>CSS character encoding declarations</cite></a>.</p>
</section>


<section id="nutshell">
  <h2 id="quickanswer"><a href="#quickanswer">Quick answer</a></h2>
  <p>Always declare the encoding of your document using a <code class="kw" translate="no">meta</code> element with a <code class="kw" translate="no">charset</code> attribute, or using the <code class="kw" translate="no">http-equiv</code> and <code class="kw" translate="no">content</code> attributes (called a pragma directive). The declaration should fit completely within the first 1024 bytes at the start of the file, so it's best to put it immediately after the opening <code class="kw" translate="no">head</code> tag.</p>
  <figure class="example">
    <p><code>&lt;!DOCTYPE html&gt;<br>
      &lt;html lang=&quot;en&quot;&gt; <br />
      &lt;head&gt;<br />
      &lt;meta charset=&quot;utf-8&quot;/&gt;<br/>
      ...</code></p>
  </figure>
  <figure class="example">
    <p><code>&lt;!DOCTYPE html&gt;<br>
      &lt;html lang=&quot;en&quot;&gt; <br />
      &lt;head&gt;<br />
      &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;<br/>
      ...</code></p>
  </figure>
  <p style="clear:both;">It doesn't matter which you use, but it's easier to type the first one. It also doesn't matter whether you type <code>UTF-8</code> or <code>utf-8</code>.</p>
  <p>You should always use the UTF-8 character encoding. (Remember that this means you also need to <em>save</em> your content as UTF-8.) See <a href="#nonutf8">what you should consider</a> if you really cannot use UTF-8.</p>
  <p>If you have access to the server settings, you should also consider whether it makes sense to <a href="#httphead">use the HTTP header</a>. <strong>Note however</strong> that, since the HTTP header has a higher precedence than the in-document <code class="kw" translate="no">meta</code> declarations, content authors should always take into account whether the character encoding is already declared in the HTTP header. If it is,  the <code class="kw" translate="no">meta</code> element  must be set to declare the same encoding.</p>
  <p>You can detect any encodings sent by the HTTP header using the <a class="print" href="http://validator.w3.org/i18n-checker/">Internationalization Checker</a>.</p>
</section>


<section>
  <h2 id="detail"><a href="#detail">Details</a></h2>
  <section>
    <h3 id="bom"><a href="#bom">What about the byte-order mark?</a></h3>
    <p>If you have a UTF-8 <a href="/International/questions/qa-byte-order-mark#bomwhat" class="termref print">byte-order mark (BOM)</a> at the start of your file then recent browser versions other than Internet Explorer 10 or 11 will use that to determine that the encoding of your page is UTF-8. It has a higher precedence than any other declaration, including the HTTP header.</p>
    <p>You could skip the <code class="kw" translate="no">meta</code> encoding declaration if you have a BOM, but we recommend that you keep it, since it helps people looking at the source code to ascertain what the encoding of the page is.</p>
    <p>Read more <a class="print" href="/International/questions/qa-byte-order-mark">about the byte-order mark</a>.</p>
  </section>
  
  <section>
    <h3 id="httphead"><a href="#httphead">Should I declare the encoding in the HTTP header?</a></h3>
    <p> Use character encoding declarations in <a href="/International/articles/definitions-characters/Overview#httpheader" class="termref print">HTTP headers</a> if it makes sense, and if you are able, for any type of content, <strong>but in conjunction with</strong> an in-document declaration.</p>
    <p>Content authors should always ensure that HTTP declarations are consistent with the in-document declarations.</p>
    <section>
      <h4 id="httpprocon">Pros and cons of using the HTTP header</h4>
      <div class="sidenoteGroup">
        <p>One advantage of using the HTTP header is that user agents can  find the character encoding information sooner when it is sent in the HTTP header.</p>
        <aside class="sideinfonote">
          <p class="info">The HTTP header information has the highest priority when it conflicts with in-document declarations other than the byte-order mark. Intermediate
            servers that transcode the data (ie. convert to a different encoding) could take advantage of this to change the encoding of a document before sending it on to small devices that only recognize a few
            encodings.  It is not clear that this transcoding is much used nowadays. If it is, and it is converting content to non-UTF-8 encodings, it runs a high risk of loss of data, and so is not good practice.</p>
        </aside>
      </div>
      <p>On the other hand, there are a number of potential disadvantages:</p>
      <ul>
        <li>
          <p>It may be difficult for content authors to change the encoding information for static files on the server â€“ especially when dealing with an ISP.
            Authors will need knowledge of and access to the server settings.</p>
        </li>
        <li>
          <p>Server settings may get out of synchronization with the document for one reason or another. This may happen, for example, if you
            rely on the server default, and that default is changed. This is a very bad situation, since the higher precedence of the HTTP information versus the
            in-document declaration may cause the document to become unreadable.</p>
        </li>
        <li>
          <p>There  are potential problems for both static and dynamic documents if they are not read from a server; for example, if they are saved to a
            location such as a CD or hard disk. In these cases any encoding information from an HTTP header is not available.</p>
          <p>Similarly, if the character encoding is only declared in the HTTP header, this information is no longer available for files during editing, or when they are
            processed by such things as XSLT or scripts, or when they are sent for translation, etc.</p>
        </li>
      </ul>
    </section>
    
    <section>
      <h4 id="shouldi">So should I use this method?</h4>
      <p>If serving files via HTTP from a server, it is never a problem to send information about the character encoding of the document in the HTTP header, as long as that information is correct.</p>
      <p>On the other hand, because of the disadvantages listed above we recommend that you should always declare the encoding information inside the document as well.  An in-document declaration also helps developers, testers, or translation production managers who want to visually check the encoding of a document.</p>
      <p>(Some people would argue that it is rarely appropriate to declare the encoding in the HTTP header if you are going to repeat it in the
        content of the document. In this case, they are proposing that the HTTP header say nothing about the document encoding. Note that this would usually mean
        taking action to <em>disable</em> any server defaults.)</p>
    </section>
  </section>
  
  <section>
    <h3 id="xml"><a href="#xml">Working with polyglot and XML formats</a></h3>
    <p><b class="leadin">XHTML5:</b> An XHTML5 document is served as XML and has XML syntax. XML parsers do not recognise the  encoding declarations in <code class="kw" translate="no">meta</code> elements. They only recognise the XML declaration. Here is an example:</p>
    <figure class="example">
      <blockquote> <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br>
        &lt;!DOCTYPE html  .... </code></blockquote>
    </figure>
    <p>The XML declaration is only required if the page is not being served as UTF-8 (or UTF-16), but it can be useful to include it so that developers, testers, or translation production managers can visually check the encoding of a document by looking at the source.</p>
    <p><b class="leadin">Polyglot markup:</b> A  page that uses polyglot markup uses a subset of HTML with  XML syntax that can be parsed either by an HTML or an XML parser. It is described in <a class="print" href="http://www.w3.org/TR/html-polyglot/"><cite>Polyglot Markup: A robust profile of the HTML5 vocabulary</cite></a>.</p>
    <p>Since a polyglot document must be in UTF-8, you don't need to, and indeed must not, use the XML declaration. On the other hand, if the file is to be read as HTML you will need to declare the encoding  using  a <code class="kw" translate="no">meta</code> element, the byte-order mark or the HTTP header. </p>
    <p>Since a declaration in a <code class="kw" translate="no">meta</code> element will only be recognized by an HTML parser, if you use the approach with the <code class="kw" translate="no">content</code> attribute its value  should start with <code>text/html;</code>.</p>
    <figure class="example">
      <blockquote> <code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt; </code></blockquote>
    </figure>
    <p>If you use the <code class="kw" translate="no">meta</code> element with a <code class="kw" translate="no">charset</code> attribute this is not something you need to consider.</p>
  </section>
</section>


<section>
  <h2 id="obscure"><a href="#obscure">Additional information</a></h2>
  <p>The information in this section relates to things you should not normally need to know, but which are included here for completeness.</p>
  
  <section>
    <h3 id="nonutf8"><a href="#nonutf8">Working with non-UTF-8 encodings</a></h3>
    <div class="sidenoteGroup">
      <p>Using UTF-8 not only simplifies authoring of pages, it avoids unexpected results on form submission and URL encodings, which use the document's character encoding by default. If you really can't avoid using a non-UTF-8 character encoding you will need to choose from a limited set of encoding names to ensure maximum interoperability and the longest possible term of readability for your content.</p>
      <aside class="sideinfonote">
        <p class="info">Although these are normally called <dfn>charset</dfn> names,
          in reality they refer to the encodings, not the character sets. For example, the Unicode character set or 'repertoire' can be encoded in three different encoding schemes.</p>
      </aside>
    </div>
    <p>Until recently  the <a
					class="print" href="http://www.iana.org/assignments/character-sets">IANA registry</a> was the place to find names for encodings. The IANA registry commonly includes multiple names for the same encoding. In this case you should use the name designated as
      'preferred'.</p>
    <p>The new <a class="print" href="http://encoding.spec.whatwg.org/"><cite>Encoding</cite></a> specification now provides a list that has been tested against actual browser implementations. You can find the list in the table in the section called <a class="print" href="http://encoding.spec.whatwg.org/#encodings">Encodings</a>. It is best to use the names in the left column of that table.</p>
    <p><strong>Note</strong>, however, that the presence of a name in either of these sources doesn't necessarily mean that it is OK to use that encoding. Several of the encodings are problematic. If you really can't use UTF-8, you should carefully consider the advice in the article <a class="print" href="/International/questions/qa-choosing-encodings"><cite>Choosing &amp; applying a character encoding</cite></a>.</p>
    <p>Do not invent your own encoding names preceded by <code>x-</code>. This is a bad idea since it
      limits interoperability. </p>
  </section>
  
  <section>
    <h3 id="legacyhtml"><a href="#legacyhtml">Working with legacy HTML formats</a></h3>
    <p>HTML&nbsp;4.01 doesn't specify the use of the <code class="kw" translate="no">charset</code> attribute with the <code class="kw" translate="no">meta</code> element, but any recent major browser will still detect it and use it, even if the page is declared to be HTML4 rather than HTML5. This section is only relevant if you have some other reason than serving to a browser for conforming to an older format of HTML. It describes any differences from the <a href="#detail">Details</a> section above.</p>
    <p>For pages served as XML, see <a href="#xml">Working with polyglot and XML formats</a>.</p>
    <p><b class="leadin">HTML4:</b> As mentioned just above, you need to use the pragma directive for full conformance with HTML&nbsp;4.01, rather than the <code class="kw" translate="no">charset</code> attribute.</p>
    <p><b class="leadin">XHTML 1.x served as text/html:</b> Also needs the pragma directive for full conformance with HTML&nbsp;4.01, rather than the <code class="kw" translate="no">charset</code> attribute. You do not need to use the XML declaration, since the file is being served as HTML.</p>
    <p><b class="leadin">XHTML 1.x served as XML:</b> Use the <code class="kw" translate="no">encoding</code> declaration of the XML declaration on the first line of the page. Ensure there is nothing before it, including spaces (although a <a class="termref print" href="/International/questions/qa-byte-order-mark">byte-order mark</a> is OK).</p>
  </section>
  
  <section>
    <h3 id="charset"><a href="#charset">The <code class="kw" translate="no">charset</code> attribute on a link</a></h3>
    <p>HTML5 deprecated the use of the <code class="kw" translate="no">charset</code> attribute on an <code class="kw" translate="no">a</code> or <code class="kw" translate="no">link</code> element, so you should avoid using it. It originated in the HTML&nbsp;4.01 specification for use with the <code class="kw" translate="no">a</code>, <code class="kw" translate="no">link</code> and <code class="kw" translate="no">script</code> elements and was supposed to indicate the encoding of the document you are linking to. </p>
    <p>It was intended for use on an embedded link element like this:</p>
    <figure class="example">
      <div class="badcode"><span><img src="../icons/dontcopy.png" alt=" "> Bad code. Don't copy!</span> </div>
      <div><code>See our &lt;a href=&quot;/mysite/mydoc.html&quot; charset=&quot;iso-8859-15&quot;&gt;list of publications&lt;/a&gt;.</code></div>
    </figure>
    <p>The idea was that the browser would be able to apply the right encoding to the document it retrieves if no encoding is specified for the document in any other way. </p>
    <p>There were always issues with the use of this attribute. Firstly, it is not well supported by major browsers. One reason not to support this attribute is that if browsers do so without special additional rules it would be an XSS attack vector. Secondly, it is hard to ensure that the information is correct at any given time. The author of the document pointed to may well change the encoding of the document without you knowing. If the author still hasn't specified the encoding of their document, you will now be asking the browser to apply an incorrect encoding. And thirdly, it shouldn't be necessary anyway if people follow the guidelines in this article and mark up their documents properly. That is a much better approach.</p>
    <p>This way of indicating the encoding of a document has the lowest precedence (ie. if the encoding is declared in any other way, this will be ignored). This means that you couldn't use this to correct incorrect declarations either.</p>
  </section>

  <section>
    <h3 id="utf16"><a href="#utf16">Working with UTF-16</a></h3>
    <p>According to the results of a Google sample of several billion pages, less than 0.01% of pages on the Web are encoded in UTF-16. UTF-8  accounted for over 80% of all Web pages, if you include its subset, ASCII, and over 60% if you don't. You are strongly discouraged from using UTF-16 as your page encoding.</p>
    <p>If, for some reason, you have no choice, here are some rules for declaring the encoding. They are different from those for other encodings.</p>
    <p>The HTML5 specification forbids the use of  the <code class="kw" translate="no">meta</code> element to declare UTF-16, because the values must be <a class="termref print" href="http://www.w3.org/TR/html5/infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible</a>. Instead  you should ensure that you always have a <a href="/International/questions/qa-byte-order-mark" class="termref print">byte-order mark</a> at the very start of a UTF-16 encoded file. In effect, this is the in-document declaration.</p>
    <p>Furthermore, if your page is encoded as UTF-16, do not declare your file to be &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot;, use &quot;UTF-16&quot; only. The byte-order mark at the beginning of your file will indicate whether the encoding scheme is <span class="qterm">little-endian</span> or <span class="qterm">big-endian</span>. (This is because content explicitly encoded as, say, UTF-16BE  should not use a byte-order mark; but HTML5 requires a byte-order mark for UTF-16 encoded pages.) </p>
  </section>
</section>


<!--div class="section2">
  <h3><a id="xmldeclaration" name="xmldeclaration" href="#xmldeclaration">The XML declaration</a></h3>
  <p>The XML declaration is defined by the XML standard.  It appears at the top of an XML file and supports an <span
					class="kw">encoding declaration</span>. For example:</p>
  <div class="example"> <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</code> </div>
  <p>An XML declaration is required for a document parsed as XML if the encoding of the document is other than UTF-8 or UTF-16 and if the encoding is
    not provided by a <q>higher level protocol</q>, ie. the HTTP header.</p>
  <p>This is significant, because if you decide to omit the XML declaration you must choose either UTF-8 or UTF-16 as the encoding for the page if it is to be used without HTTP!</p>
  <p>You should use an XML declaration to specify the encoding of any XHTML 1.x  document served as XML.</p>
  <p>It can be useful to use an XML declaration for web pages served as XML, even if the encoding is UTF-8 or UTF-16, because an in-document declaration of this kind also helps developers, testers, or translation production managers ascertain the encoding of the file with a
    visual check of the source code.</p>
  <div class="sidenoteGroup">
    <p><span class="leadin">Using the XML declaration for XHTML served as HTML.</span> XHTML served as HTML is parsed as HTML, even though it is based on XML syntax, and therefore an XML declaration should not be recognized by the browser. It is for this reason that you should use a <a href="#metacontenttype">pragma directive</a> to specify the encoding when serving XHTML in this way*.</p>
    <div class="sidenote">
      <p>* Conversely, the pragma directive, though valid, is not recognized as an encoding declaration by XML parsers.</p>
    </div>
  </div>
  <p>On the other hand, the file may also be used at some point as input to other processes that do use XML parsers. This includes such things as XML editors, XSLT transformations, AJAX, etc. In addition, sometimes people use server-side logic to determine whether to serve the file as HTML or XML. For these reasons, if you aren't using UTF-8 or UTF-16 you should add an XML declaration at the beginning of the markup, even if it is served to the browser as
    HTML. This would make the top of a  file look like this:</p>
  <div class="example"> <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;<br />
    &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />
    &lt;html xmlns=&quot;http&lrm;://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;<br />
    &lt;head&gt;<br />
    &lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;/&gt;<br />
    ...</code> </div>
  <p>If you <em>are</em> using UTF-8 or UTF-16, however, there is no need for the XML declaration, especially as the <code class="kw">meta</code> element provides for visual inspection of the encoding by people processing the file.</p>
  <p><span class="leadin">Catering for older browsers.</span> If anything appears before the DOCTYPE declaration in Internet Explorer 6, the page is rendered in <a href="/International/articles/serving-xhtml/#quirks">quirks mode</a>. If you are using UTF-8 or UTF-16 you can omit the XML declaration, and you will have no problem.</p>
  <p>If, however, you are not using these encodings and Internet Explorer 6 users still count for a significant proportion of your readers, and if your document contains  constructs that are affected by the difference between <a href="/International/articles/serving-xhtml/#quirks">standards mode</a> vs. quirks mode, then this may be an issue. If you want
    to ensure that your pages are rendered in the same way on all standards-compliant browsers, you will have to add workarounds to your CSS to overcome the differences.</p>
  <p>There may also be some other rendering issues associated with an XML declaration, though these are probably only an issue for much older browsers. The XHTML specification <a href="http://www.w3.org/TR/2002/REC-xhtml1-20020801/#C_1">warns</a> that <q>processing instructions
    are rendered on some user agents. Also, some user agents interpret the XML declaration to mean that the document is unrecognized XML rather than
    HTML, and therefore may not render the document as expected.</q> You should do <a href="http://www.w3.org/International/tests/tests-html-css/list-encoding-html-css">testing</a> on appropriate user agents to decide <a href="http://www.webstandards.org/learn/articles/prolog_problems/">whether this will be an issue for you</a>.</p>
  <p>Of course, as mentioned above, if you use UTF-8 or UTF-16 you can omit the XML declaration and the file will still work as XML or HTML. This is probably the simplest solution.</p>
</div-->


<section>
<h2 id="endlinks"><a href="#endlinks">Further reading</a></h2>
<aside class="section" id="survey"> </aside><script>document.getElementById('survey').innerHTML = g.survey</script>

  <ul id="full-links">
    <li>
      <p>Getting started? <a href="/International/getting-started/characters"><cite>Introducing Character Sets and Encodings</cite></a></p>
    </li>
    <li>
      <p>Tutorial, <a href="/International/tutorials/tutorial-char-enc/"><cite>Handling character encodings in HTML and CSS</cite></a></p>
    </li>
    <li>
      <p>Related links, <cite>Authoring HTML &amp; CSS</cite></p>
      <ul>
        <li><a href="/International/techniques/authoring-html#charset">Characters</a></li>
        <li><a href="/International/techniques/authoring-html#indoc">Declaring the character encoding for HTML</a></li>
        <li><a href="/International/techniques/authoring-html#choosing">Choosing and applying a character encoding</a></li>
      </ul>
    </li>
    <li>
      <p>Related links, <cite>Setting up a server</cite></p>
      <ul>
        <li><a href="/International/techniques/server-setup#charset">Characters</a></li>
      </ul>
    </li>
  </ul>
</section>

<footer id="thefooter"></footer><script>document.getElementById('thefooter').innerHTML = g.bottomOfPage</script>
<script>completePage()</script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-hans">
<head>
<meta charset="utf-8" />
<title>双向文本：Unicode控制字符还是标记语言？</title>
<meta name="description" content="要正确显示HTML或者XML里的双向文本，应该使用Unicode控制字符还是标记语言？" />
<script>
var f = { }

// AUTHORS should fill in these assignments:
f.directory = 'questions'+'/' // the path to this file, not including /International or the file name
f.filename = 'qa-bidi-controls' // the file name WITHOUT extensions
f.authors = 'Richard Ishida, W3C' // author(s) and affiliations
f.previousauthors = '' // as above
f.modifiers = '' // people making substantive changes, and their affiliation
f.searchString = 'qa-bidi-controls' // blog search string - usually the filename without extensions
f.firstPubDate = '2003-06-13' // date of the first publication of the document (after review)
f.lastSubstUpdate = { date:'2016-03-10', time:'18:39'}  // date and time of latest substantive changes to this document
f.status = 'published'  // should be one of draft, review, published, notreviewed or obsolete
f.path = '../' // what you need to prepend to a URL to get to the /International directory 

// AUTHORS AND TRANSLATORS should fill in these assignments:
f.thisVersion = { date:'2023-12-14', time:'18:39'} // date and time of latest edits to this document/translation
f.contributors = 'Mati Allouche' // people providing useful contributions or feedback during review or at other times
// also make sure that the lang attribute on the html tag is correct!
f.sources = '' // describes sources of information

// TRANSLATORS should fill in these assignments:
f.translators = '薛富侨' // translator(s) and their affiliation - a elements allowed, but use double quotes for attributes

f.breadcrumb = 'direction'

f.additionalLinks = ''
</script>
<script src="qa-bidi-controls-data/translations.js"> </script>
<script src="../javascript/doc-structure/article-dt.js"> </script>
<script src="../javascript/boilerplate-text/boilerplate-zh-hans.js"> </script>
<!--TRANSLATORS must change -en in the line just above to the subtag for their language! -->
<script src="../javascript/doc-structure/article-2022.js"> </script>
<script src="../javascript/articletoc-2022.js"></script>
<link rel="stylesheet" href="../style/article-2022.css" />
<link rel="copyright" href="#copyright"/>
<script src="../javascript/prism.js"></script>
<link rel="stylesheet" href="../style/prism.css">

<style media="all">
.visualascii {
	font-weight: bold;
}
</style>
</head>

<body>
<header>
  <nav id="mainNavigation"></nav><script>document.getElementById('mainNavigation').innerHTML = mainNavigation</script>
  
  <h1>双向文本：Unicode控制字符还是标记语言？</h1>
</header>


  <div id="audience">
    <div id="updateInfo"></div><script>document.getElementById('updateInfo').innerHTML = g.updated</script>
  </div>
  
<section id="question">
<h2>问题</h2>
    <p class="question">要正确显示HTML或者XML里的双向文本，应该使用Unicode控制字符还是标记语言？</p>
    <p>为了正确显示字符和对象，Unicode双向文本算法需要一些明确的帮助（参见<cite><a href="/International/questions/qa-html-dir">HTML中由右至左书写的文本的结构标记</a></cite>以及<cite><a href="/International/articles/inline-bidi-markup/">HTML中的行内标记和双向文本</a></cite>）。我们可以使用标记语言来明确地控制这一行为，在某些情况下也可以使用Unicode中的特殊格式控制字符。本文将探讨，如果可以选择的话，在HTML和XML中应该使用标记语言还是控制字符。</p>
    <p>有关Unicode控制字符如何工作，包括标记语言和控制字符之间的对应表，请参阅<cite><a href="/International/questions/qa-bidi-unicode-controls#basedirection">如何在双向文本中使用Unicode控制字符</a></cite>。</p>
</section>



<section id="nutshell">
   <h2 id="quickanswer">快速回答</h2>
    <p>在处理结构或段落级标记时，Unicode控制字符对双向文本无效。</p>
    <p>对于行内的内容，我们建议尽可能使用HTML和XML标记，而不是Unicode控制字符。</p>
    <p>即使在HTML和XML页面中，也有一些地方无法使用标记，因此只能使用控制字符（不过，语言设计者应尽可能消除这种情况）。</p>
</section>


<section id="details">
<h2>说明</h2>

<section id="structural">
<h3>不适合结构性标记</h3>
  <p>我们需要用标记语言来为整个文档（比如在<code class="kw" translate="no">html</code>标签中）和块级元素确定默认书写方向。由于控制字符不能跨越段落（可理解为<span class="qterm">块元素</span>）边界，而且控制字符不能通过标记的层次结构管理继承和适用范围，它们只适合行内使用。</p>
  <p>理论上，在只包含内联文本的块标记（如HTML中的<code class="kw" translate="no">p</code>标签）的开始和结尾使用控制字符是可行的，但这样做比使用标记语言要费事得多，这不仅是因为你需要在每个这类元素中添加控制字符（而不是继承），还因为你必须采取额外的步骤来添加右对齐。</p>
  <p>控制字符不能用于反转表格列的书写方向或者设置表单字段的默认输入方向。</p>
</section>
<section id="reasons">
<h3>行内使用时应考虑的事项</h3>
  <p>只有在Unicode双向文本算法需要帮助时，我们才需要明确的行内控制。Unicode控制字符可以完成这项任务，但我们建议使用标记语言而不是成对的控制字符。</p>
  <div class="sidenoteGroup">
  <p>主要问题在于控制字符是不可见的，除非使用转义形式。这种不可见性使得创建重叠或未终止的范围变得很容易。</p>
  <aside class="sideinfonote"><p class="warning">Using escapes is also problematic, since the characters that make up an escape can be mangled by editors in bidirectional text. See <a href="https://www.w3.org/TR/2014/NOTE-i18n-html-tech-bidi-20140603/#bidisource"><cite>Authoring HTML: Handling Right-to-left Scripts</cite></a> for more information.</p></aside>
  </div>
  <p>If you run your document through a markup checker it is more likely to spot things such as overlapping ranges if you have used markup. Also, although the HTML5 specification goes to some trouble to ensure that unterminated ranges are correctly handled for markup that is equivalent to paragraphs, this is probably not the case for other markup applications.</p>
  <p>This problem can be aggravated if you are injecting external content into your page without converting the control codes to markup. You should also bear in mind that any time you use CSS to change an inline element to a block element then you may need to also  rearrange any control codes you are using to manage direction.</p>
  <p>Invisible characters also make it harder to debug code, unless you have an editor that shows the invisible characters – and even then, you often need to look closely to determine which characters have been used.</p>
  <p>Apart from these potential difficulties, it is often just easier for content developers to use markup. Often there is already markup around inline ranges of text to which you need to apply direction – for example, a <code class="kw" translate="no">cite</code> element, or a <code class="kw" translate="no">span</code> used to supply language information or styling. It could also be argued that it's simpler to consistently use markup throughout the document, rather than using markup in some higher level parts of the document and then switching to control codes for the lower levels.</p>
  <p>The Unicode Consortium and the W3C recommend applying isolation to embedded ranges of text where the base direction is changed. This means that you should use the RLI, LRI and PDI control codes, rather than the RLE, LRE and PDF ones.</p>
</section>
<section id="problems">
<h3>Unicode controls <em>are</em> needed for plain text</h3>
    <p>Apart from formats that are based on plain text rather than markup, there are also places in an HTML or XML file where markup cannot be used, and the Unicode formatting  characters are therefore
      the only recourse. </p>
    <p>It is not possible to apply directional markup to attribute values, so any text in attributes will need to use Unicode characters to
      control direction. (Having said that, the <a class="print" href="http://www.w3.org/TR/xml-i18n-bp/#DevAttributes">W3C recommends that</a>  developers
      creating markup vocabularies avoid creating situations where content authors will use natural language text in attribute values. There may be legacy markup, however, such as <code class="kw" translate="no">alt</code> attributes in HTML, where this is unavoidable.)</p>
    <p>Other situations where control characters may provide the only resort are elements that only allow character content or that omit
      support for directional attributes. An example is the <code class="kw" translate="no">title</code> element in HTML. (Again, such situations should be avoided when creating new
      XML formats. They limit not only the application of directional text, but also application of language and other meta information.)</p>
    <p>For advice on how to use Unicode control characters in these cases, see <cite><a href="/International/questions/qa-bidi-unicode-controls">How to use Unicode controls for bidi text</a></cite>.</p>
  </section>
  
<section id="exceptions">
<h3>RLM and LRM characters</h3>
    <p>Two other invisible but non-paired directional control characters provided by Unicode do not usually have corresponding markup. These characters are less problematic because they are used singly, not in pairs to delimit ranges
      of text like the other control characters we have discussed. </p>
  <ul>
      <li>U+200E:   LEFT-TO-RIGHT MARK  (&amp;lrm;)</li>
      <li>U+200F:   RIGHT-TO-LEFT MARK (&amp;rlm;)</li>
    </ul>
    <p>If you tightly wrap opposite-direction phrases with isolating markup there are few places, if any, where you would need to use these two characters. For more on this, see <a href="/International/articles/inline-bidi-markup/"><cite>Inline markup and bidirectional text in HTML</cite>.</a></p>
</section>
</section>




<section id="endlinks">
<h2>Further reading</h2>
<aside class="section" id="survey"> </aside><script>document.getElementById('survey').innerHTML = g.survey</script>
<ul id="full-links">
  <li>
    <p>Tutorial, <cite><a href="/International/tutorials/bidi-xhtml/">Creating HTML Pages in Arabic, Hebrew and Other Right-to-left Scripts</a></cite></p>
  </li>
  <li>
    <p><a href="/International/articles/inline-bidi-markup/"><cite>Inline markup and bidirectional text in HTML</cite></a></p>
  </li>
  <li>
    <p>Related links, <cite>Authoring HTML &amp; CSS</cite></p>
    <ul>
      <li><a href="/International/techniques/authoring-html?collapse&amp;open=direction">Text direction</a></li>
      <li><a href="/International/techniques/authoring-html#inline">Mixing text direction inline</a></li>
    </ul>
  </li>
</ul>
</section>

<footer id="thefooter"></footer><script>document.getElementById('thefooter').innerHTML = g.bottomOfPage</script>
<script>completePage()</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<title>Когда следует использовать language negotiation (согласование языка)</title>
<meta name="description" content="Когда нужно, а когда не нужно использовать согласование языка?" />
<script type="text/javascript">
var f = { }

// AUTHORS should fill in these assignments:
f.directory = 'questions'+'/' // the path to this file, not including /International or the file name
f.filename = 'qa-when-lang-neg' // the file name WITHOUT extensions
f.authors = 'François Yergeau' // author(s) and affiliations
f.previousauthors = '' // as above
f.modifiers = '' // people making substantive changes, and their affiliation
f.searchString = 'qa-when-lang-neg' // blog search string - usually the filename without extensions
f.firstPubDate = '2004-02-26' // date of the first publication of the document (after review)
f.lastSubstUpdate = { date:'2004-02-26', time:'15:10'}  // date and time of latest substantive changes to this document
f.status = 'published'  // should be one of draft, review, published, notreviewed or obsolete
f.path = '../' // what you need to prepend to a URL to get to the /International directory 

// AUTHORS AND TRANSLATORS should fill in these assignments:
f.thisVersion = { date:'2016-03-04', time:'16:32'} // date and time of latest edits to this document/translation
f.contributors = '' // people providing useful contributions or feedback during review or at other times
// also make sure that the lang attribute on the html tag is correct!
f.sources = '' // describes sources of information

// TRANSLATORS should fill in these assignments:
f.translators = 'Александр Шлапак' // translator(s) and their affiliation - a elements allowed, but use double quotes for attributes

f.breadcrumb = 'navigation'

f.additionalLinks = ''
</script>
<script type="text/javascript" src="qa-when-lang-neg-data/translations.js"> </script>
<script type="text/javascript" src="../javascript/doc-structure/article-dt.js"> </script>
<script type="text/javascript" src="../javascript/boilerplate-text/boilerplate-ru.js"></script><!--TRANSLATORS must change -en to the subtag for their language!-->
<script type="text/javascript" src="../javascript/doc-structure/article.js"> </script>
<script type="text/javascript" src="../javascript/articletoc-html5.js"></script>
<link rel="stylesheet" href="../style/article-2016.css" type="text/css" />
<link rel="copyright" href="#copyright"/>
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
<header>
  <nav id="mainNavigation"></nav><script>document.getElementById('mainNavigation').innerHTML = mainNavigation</script>
  
  <h1>Когда следует использовать language negotiation (согласование языка)</h1>
</header>


<section>
  <div id="audience">
    <p><span id="intendedAudience" class="leadin">Intended audience:</span> 
    веб-мастера, администраторы серверов, а также те, кто хочет лучше понять согласование основанного на языке контента.</p>
    <div id="updateInfo"></div><script>document.getElementById('updateInfo').innerHTML = g.updated</script>
    </div>
    
  <h2 id="question"><a href="#question">Question</a></h2>
    <p class="question">Когда нужно, а когда не нужно использовать согласование языка?</p>
  
  <p>Language negotiation (согласование языка) - функция HTTP протокола, которая позволяет серверу выбирать между несколькими языковыми версиями страницы, основанная на
    URL и на информации о предпочтениях пользователей, отправленных браузером (в частности, в <code class="kw" translate="no">Accept-Language</code> заголовке). Это отличается от выбора
    страницы, основанный на IP адресе браузера или от ручного выбора пользователем на странице выбора языка. Если
    предпочтения пользователей, которые выражаются браузером и языки, которые доступны на сервере отличаются, то показывается страница выбора языков или обслуживается язык
    установленный по умолчанию.</p>
  <p>Во многих случаях, начальная установка клиентского приложения для языковых предпочтений является подходящей. Например, если у вас есть Японская версия браузера, то
    браузер обычно предполагает, что вы предпочитаете страницам на Японском языке, и отправляет эту информацию на сервер. Основные браузеры позволяют изменять
    эти языковые предпочтения. Дополнительную информацию смотрите в статье <a class="print" href="qa-lang-priorities"><cite>Настройка языковых предпочтений в браузере</cite></a>.</p>
  <p>В данной статье рассматривается вопрос, когда на сервере необходимо (или когда не нужно) настраивать согласование языка.</p>
</section>


<section>
  <h2 id="answer"><a href="#answer">Answer</a></h2>
  <p>Краткий ответ: <em>всегда</em>.</p>
  <p>Чуть более подробный ответ: <em>почти</em> всегда, <em>но не наедине</em>.</p>
  <p>Согласование языка <a href="#shortcomings">не всегда работает по назначению</a>; есть методы <a href="#overrides">которые используются, чтобы
    компенсировать недостатки</a>; следует также предусмотреть <a href="#stickyness">гибкость навигации</a>.</p>
    
  <section>
    <h3 id="shortcomings"><a href="#shortcomings">Недостатки согласования языка</a></h3>
    <p>Очевидно, что согласование языка это полезная вещь, но до ее реализации во всех направлениях, важно понять ее
      границы. Чтобы проиллюстрировать это мы используем сайт www.example.be, который предлагает свой ​​контент на Фламандском, Французском и Немецком языках, здесь применяется
      согласование языка, и Фламандская язык устанавливается по умолчанию для всех страниц. Наш гость, Сильвия, разговаривает на Итальянском языке, но сможет иметь дело и с Немецким языком. Здесь могут возникнуть
      несколько ситуаций:</p>
    <ol>
      <li>Браузер Сильвии настроен верно и выражает предпочтения пользователей следующим образом: сначала Итальянский язык, а затем Немецкий язык. Когда Итальянский язык будет не доступен на сайте
        www.example.be, то страницы будут показываться на Немецком языке, посетители будут довольны, то есть все будет хорошо. Это то для чего требуется согласование языка!</li>
      <li>Сильвия не имеет технических навыков, она никогда не слышала о HTTP согласовании языка и никогда не нуждалась в изменении настроек
        своего браузера. Итальянская версия браузера настроена (правильно) на установление Итальянского языка в качестве предпочтения пользователей. Нажимая на www.example.be мы видим: Итальянский язык не доступен
        и поэтому отображается Фламандский язык, что на этом сайте является языком по умолчанию, пусть и доступен Немецкий язык. А это плохо.</li>
      <li>Сильвия не использует свой ​​собственный браузер, она сидит в интернет кафе в Москве. Браузер тут настроен на (или
        по умолчанию использует) Русский язык. Она снова получает Фламандская язык. А это плохо.</li>
    </ol>
    <p>Надеемся, что теперь вам понятно: согласование языка, не всегда дает желаемый результат.</p>
    <p id="equivalence">Кроме того, даже согласование языка не является <em>важным</em> тогда, когда страницы не являются
      равноценными, то есть по сути различный контент на разных языках. Статья <a class="print" href="/International/questions/qa-mono-multilingual"><cite>Одноязычные или многоязычные
      Веб сайты</cite></a> немного проясняет эту ситуацию, в частности, смотрите подразделы "<em>Многоязычный одинаковый контент</em>" и "<em>Многоязычный измененный контент</em>"
      . Однако, заметим, что определенная культурная адаптация (например, изменение валюты) не обязательно сделает страницы неравноценными;
      ограничения неравноценности контента по поводу согласования языка действительно существует тогда, когда <em>сайт</em> адаптирован так, что страницы на разных языках больше не
      соответствуют друг другу.</p>
  </section>
    
  <section>
    <h3 id="overrides"><a href="#overrides">Упорядочение недостатков</a></h3>
    <p>Несмотря на свою ограниченность, согласование языка является полезной функцией, и её желательно, реализовывать на многоязычных сайтах. Но
      нужно убрать недостатки. Короче говоря, важно обеспечить гостей значениями для того, чтобы <em>переопределить</em> автоматический выбор языка тогда, когда этот выбор
      неверный. Эти значения вставляют некоторые элементы интерфейса на страницу (тут мы их называем <em> language controls</em> (управляющие значения языка)), что ссылается на другие доступные
      языки. Конечно, эти управляющие значения, должны быть хорошо заметными и понятными для посетителя, который не знаком с языком, который в настоящее время
      отображается на странице.</p>
    <p>Возникает один вопрос: согласование языка и ручные управляющие значения языка должны быть реализованы для всех страниц, или только для
      домашней страницы? Лучший ответ "для всех страниц", за исключением наборов страниц, не являющихся <a href="#equivalence">достаточно равноценными</a>. Согласование
      языка хорошо, потому что, когда Яап отправляет Пьеру ссылку по электронной почте внутри сайта www.example.be, то Пьер будет рад получить Французский версию ссылки, пусть и Яап
      прочитал её на Фламандском языке. Language controls (управляющие значения языка) должны предоставляться независимо от того, реализовано было согласование языка или нет. Если согласование языка отсутствует, то Пьеру понадобятся
      управляющие значения для того, чтобы получить Французскую версию ссылки, переданной Яапом; даже если согласование языка присутствует, в вышеупомянутых ситуациях 2 и 3 Сильвие все равно нужно будет переключиться на Немецкий язык
      вручную.</p>
    <p>Кстати, когда среди доступных языков нет тех, которым пользователь отдает предпочтение, некоторые сайты выбирают для отображения страницу специального назначения
      для выбора языка (сайт www.example.be мог бы сделать это вместо отображения страницы на Фламандском языке). Полезно прояснить ситуацию
      и не предоставлять приоритет одному языку над другими, это может иметь политический характер. К сожалению, некоторые сайты всегда отображают
      эту специальную страницу (для домашней страницы) <em>вместо</em> того чтобы реализовать согласование языка. Это заставляет всех гостей всегда попадать на эту страницу
      , которая не содержит никакой явной пользы для посетителя. Плохой дизайн - это чисто человеческий фактор.</p>
  </section>
    
  <section>
    <h3 id="stickyness"><a href="#stickyness">Навигация</a></h3>
    <p>Предположим, что Сильвия посещает сайт www.example.be и видит страницы на Фламандском языке (ситуация 2 или 3). Затем она нажимает на переключатель и далее читает уже страницу на Немецком языке, то есть никакой реальной
      проблемы нет. Но потом она нажимает на ссылку, чтобы зайти на интересную страницу, которая находится на сайте. К сожалению она снова увидит страницу на Фламандском языке! К счастью там еще есть переключатель, чтобы включить Немецкий язык
      , но становится понятно, что после нескольких таких переходов она разочаруется. А разве сайт www.example.be не может запомнить, что она не может читать на Фламандском языке?
      Что же здесь необходимо - это некоторая <em>гибкость</em> очевидного выбора языка.</p>
    <p>Есть несколько способов, которыми сайт www.example.be может обеспечить эту гибкость. Какой из них выбрать, зависит от основной
      доступной на сервере технологии и от усилий, которые могут быть применены.</p>
    <p>Если сайт реализует механизм <em>session</em> (сессии) (например, с использованием <a
					class="print" href="ftp://ftp.rfc-editor.org/in-notes/rfc2965.txt">cookies</a>), то достаточно просто организовать то, чтобы язык был частью
      сессии. После того, как Сильвия нажмет на переключатель и включит Немецкий язык, это действие сохранится (или в cookie, либо на сервере, и прикрепляется к <em>номеру сессии</em> в cookie) и после того при просмотре страниц на сайте Сильвия будет видеть их на Немецком языке. Cookie даже может быть постоянным (хотя
      это обостряет вопрос личной неприкосновенности), так что Сильвия автоматически увидит страницы на Немецком языке в следующий раз, когда она вернется на сайт www.example.be. Сайты, которые обеспечивают
      механизм login (логин) могут сохранять языковые предпочтения в рамках профиля каждого пользователя, и соответственно этому обслуживать страницы. Тогда согласование языка используется
      только для пользователей, которые еще ​​не вошли в систему.</p>
    <div class="sidenoteGroup">
      <p>Еще один из способов уменьшить разочарование посетителей - сделать все внутренние ссылки внутри сайта <em>language-specific</em> (на соответствующих тексту страниц языках). На Немецкой домашней
        странице: ссылки на более глубокие страницы будут иметь вид: <code>href="company/about<b>.de</b>.html"</code> (вместо <code>company/about.html</code>, что
        было бы <em>language-generic</em>) (общей языковой ссылкой)*. Навигация тогда вынуждена будет оставаться на Немецком языке, пока не будет переопределена специальными управляющими значениями языка. Однако, это
        имеет несколько недостатков. Один из них - то, что все внутренние ссылки нужно будет переводить, что в свою очередь увеличивает стоимость перевода и
        вероятность появления ошибок. Другой недостаток - если Яап отправляет ссылку Пьеру, URL (взятый из адресной строки браузера) будет language-specific (на конкретном языке);
        Пьер тогда получит страницу на Фламандском языке. Ни один из этих недостатков не являются ужасным, однако, использование ссылок language-specific (на конкретном языке), вероятно, является путем которым нужно пойти,
        если гибкость нельзя обеспечить путем использования сессий или профильного механизма.</p>
      <div class="sideinfonote"><p class="footnote">Обратите внимание, что здесь показаны особые формы language-specific (на конкретном языке) и language-generic URLs (общие языковые ссылки) 
        (company/about<b>.de</b>.html или company/about.html), что зависит от технологии, используемой на сервере для того, чтобы реализовать согласование языка. Используя <a class="print" href="/International/questions/qa-apache-lang-neg">Apache MultiViews</a>, один человек хотел бы видеть: company/about.html<b>.de</b> и company/about.html или полный отказ от
        .html расширения: company/about<b>.de</b> и company/about.</p></div>
    </div>
  </section>
</section>


<section>
  <h2 id="bytheway"><a href="#bytheway">By the way</a></h2>
  <p>HTTP <code class="kw" translate="no">Accept-Language</code> заголовок не является единственным доступным источником информации о языке. Все браузеры также направляют <code class="kw" translate="no">User-Agent</code> заголовок при этом выявляя браузер, номер его версии, а в некоторых случаях еще и язык. Он может использоваться для того, чтобы угадать
    язык, которому пользователь отдает предпочтение в случае, когда отсутствует <code class="kw" translate="no">Accept-Language</code> заголовок, но он менее надежный и более ограничен (только один язык) чем
    Accept-Language заголовок. Используйте его с максимальной осторожностью.</p>
  <p>Согласование языка - только один из аспектов HTTP согласования контента. Другие аспекты, которые могут быть согласованы автоматически это: media type
    (медиа тип) (то есть формат: HTML, PDF или, например, простой текст), кодировка символов и передача кодировки (зашифрованная, сжатая, и т.д.).
    Согласование языка является наиболее полезным и наиболее часто используемым.</p>
</section>


<section>
<h2 id="endlinks"><a href="#endlinks">Further reading</a></h2>
<aside class="section" id="survey"> </aside><script>document.getElementById('survey').innerHTML = g.survey</script>

<ul id="full-links">
    <li>
      <p><a href="qa-lang-priorities"><cite> Настройка языковых предпочтений в браузере</cite></a> </p>
    </li>
    <li>
      <p><a href="qa-apache-lang-neg"><cite> Настройка согласования языка с помощью Apache MultiViews</cite></a> </p>
    </li>
    <li>
      <p>Ссылки по теме, <cite>Настройка сервера</cite></p>
      <ul>
      <li><a href="/International/techniques/server-setup#language">Язык</a></li>
      <li><a href="/International/techniques/server-setup#multiviews">Настройка согласования языка с помощью MultiViews на сервере Apache</a></li>
      <li><a href="/International/techniques/server-setup#langvalues">Выбор языковых значений</a></li>
      </ul>
    </li>
  </ul>
</section>

<footer id="thefooter"></footer><script type="text/javascript">document.getElementById('thefooter').innerHTML = g.bottomOfPage</script>
<script type="text/javascript">completePage()</script>
</body>
</html>

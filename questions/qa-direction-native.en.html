<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>How can I use direction metadata in native APIs?</title>
<meta name="description" content="Pointers to native APIs for setting string direction in native controls">
<script>
var f = { }

// AUTHORS should fill in these assignments:
f.directory = 'questions'+'/'; // the name of the directory this file is in
f.filename = 'qa-direction-native'; // the file name WITHOUT extensions
f.authors = 'Addison Phillips, Invited Expert'; // author(s) and affiliations
f.previousauthors = ''; // as above
f.modifiers = ''; // people making substantive changes, and their affiliation
f.searchString = 'qa-direction-native'; // blog search string - usually the filename without extensions
f.firstPubDate = '2024-07-16'; // date of the first publication of the document (after review)
f.lastSubstUpdate = { date:'2024-07-18', time:'02:02'}  // date and time of latest substantive changes to this document
f.status = 'published';  // should be one of draft, review, published, or notreviewed
f.path = '../' // what you need to prepend to a URL to get to the /International directory 

// AUTHORS AND TRANSLATORS should fill in these assignments:
f.thisVersion = { date:'2024-07-18', time:'02:02'} // date and time of latest edits to this document/translation
f.contributors = ''; // people providing useful contributions or feedback during review or at other times
// also make sure that the lang attribute on the html tag is correct!

// TRANSLATORS should fill in these assignments:
f.translators = 'xxxNAME, ORG'; // translator(s) and their affiliation - a elements allowed, but use double quotes for attributes

f.breadcrumb = 'style';

f.additionalLinks = ''
</script>
<script src="qa-direction-native-data/translations.js"> </script>
<script src="../javascript/doc-structure/article-dt.js"> </script>
<script src="../javascript/boilerplate-text/boilerplate-en.js"> </script><!-- TRANSLATORS must change -en to the subtag for their language! -->
<script src="../javascript/doc-structure/article-2022.js"> </script>
<script src="../javascript/articletoc-2022.js"></script>
<link rel="stylesheet" href="../style/article-2022.css">
<link rel="copyright" href="#copyright">
<script src="../javascript/prism.js"></script>
<link rel="stylesheet" href="../style/prism.css">
<link rel="stylesheet" href="qa-direction-native-data/local.css">
</head>

<body>
<header>
<nav id="mainNavigation"></nav><script>document.getElementById('mainNavigation').innerHTML = mainNavigation</script>

<h1>How can I use direction metadata in native APIs?</h1>
</header>


<div id="audience">
<div id="updateInfo"></div><script>document.getElementById('updateInfo').innerHTML = g.updated</script> 
</div>

<p>Sometimes a program receives data from the Web that includes important metadata about the language and <a href="https://www.w3.org/TR/i18n-glossary/#dfn-string-direction">string direction</a>. Developers working with document formats and protocols on the Web that include language and direction metadata should use this metadata to influence the processing and display of the associated text. This article provides links to documentation in many different operating systems, programming environments, and user experience frameworks. These APIs can then be used to consume language and string direction metadata received on the Web or in other APIs or formats.
</p>
<p>For an introduction to the problem of language and string direction, including best practices in creating and managing metadata, see <a href="https://www.w3.org/TR/string-meta">Strings on the Web: Language and Direction Metadata</a>.
If you are unfamiliar with bidirectional and right-to-left text, there is a basic introduction <a href="https://www.w3.org/International/articles/inline-bidi-markup/uba-basics">here</a>. Please read the article <a href="https://www.w3.org/International/articles/lang-bidi-use-cases/">Use cases for bidi and language metadata on the Web</a> for detailed use cases, including a clear illustration of issues such as spillover or locale-based rendering. This section summarises some key points in that document and related to the need for language and direction metadata.</p>


<section id="APIs">
<h2><a href="#apis">APIs</a></h2>

<p>This section links to various APIs and articles about working with bidirectional text in native APIs and display frameworks.</p>

<p class="note">This list is necessarily incomplete: the Internationalization Working Group welcomes contributions and corrections. Click on the link <em>Leave a comment</em> in the <a href="#survey">Tell us what you think</a> box below.</p>

<ul>
    <li>Cocoa (Mac): <ul>
        <li><a href="https://developer.apple.com/documentation/uikit/nswritingdirection?language=objc">nswritingdirection</a></li>
    </ul></li>

    <li>Java: <ul>
		<li><a href="https://docs.oracle.com/javase/8/docs/api/java/awt/ComponentOrientation.html">java.awt.ComponentOrientation</a> (controls display of widgets)</li>
		<li><a href="https://docs.oracle.com/javase/8/docs/api/java/text/Bidi.html">java.text.Bidi</a> (analyze text direction)</li>
	</ul></li>

    <li>Windows: <ul>
        <li><a href="https://learn.microsoft.com/en-us/windows/apps/design/globalizing/design-for-bidi-text">Win32 Tutorial</a></li>
    </ul></li>

    <li>Android: <ul>
		<li><a href="https://developer.android.com/reference/android/view/View#attr_android:layoutDirection">layoutDirection</a></li>
		<li><a href="https://developer.android.com/reference/android/text/BidiFormatter">BidiFormatter</a> class</li>
        <li><a href="https://developer.android.com/training/basics/supporting-devices/languages#MirroringUpdateResources">Mirroring resources</a></li>
        <li><a href="https://medium.com/android-news/rtl-support-on-android-here-is-all-you-need-know-e13f2df512e2">RTL support on Android</a> (Medium article)</li>
    </ul></li>

    <li>Angular Material: <ul>
        <li><a href="https://material.angular.io/cdk/bidi/overview">Bidi</a></li>
    </ul></li>

    <li>GTK: <ul>
        <li><a href="https://docs.gtk.org/gtk4/method.Widget.set_direction.html">Widget <code>set_direction</code></a></li>
    </ul></li>
    
    <li>Pango: <ul>
		<li><a href="https://docs.gtk.org/Pango/pango_bidi.html">Pango Bidi</a></li>
    </ul></li>
    
    <li>Qt: <ul>
        <li><a href="https://doc.qt.io/qt-6/qtquick-positioning-righttoleft.html">Positioning RTL</a></li>
    </ul></li>
    
    <li>Yoga: <ul>
		<li><a href="https://www.yogalayout.dev/docs/styling/layout-direction">Layout <code>direction</code></a></li>
    </ul></li>
</ul>

</section>

<section id="example">
<h2><a href="#example">Example</a></h2>

<p>For example, the Java programming language provides the ability to set the "component orientation" on user interface classes. When combined with base direction metadata, the programmer can make bidirectional strings display properly in native controls. For example:</p>

<pre class="java">
JTextField field = new JTextField();
field.setComponentOrientation(rtl ? ComponentOrientation.RIGHT_TO_LEFT : ComponentOrientation.LEFT_TO_RIGHT);
field.setText(text);
</pre>

<p>The result of setting the <code translate="no">ComponentOrientation</code> might look like:</p>

<p><img src="./qa-direction-native-data/java-example.png" alt="Java Example"></p>

<p>For cases where the text direction is unknown (or set to <code translate="no">auto</code>), the JDK <code>java.text.Bidi</code> class can be used as a mechanism for analyzing text to obtain the component orientation:</p>

<pre class="java">
private ComponentOrientation getOrientationForUnknownText(String text) {
    final int defaultDirection = (ComponentOrientation.getOrientation(Locale.getDefault())
            isLeftToRight()) ? Bidi.DIRECTION_DEFAULT_LEFT_TO_RIGHT
                    : Bidi.DIRECTION_DEFAULT_RIGHT_TO_LEFT;
    final Bidi b = new Bidi(text, defaultDirection);
    return b.baseIsLeftToRight() ? ComponentOrientation.LEFT_TO_RIGHT
           : ComponentOrientation.RIGHT_TO_LEFT;
}
</pre>
</section>
<section> 
<h2 id="endlinks"><a href="#endlinks">Further reading</a></h2>
<aside class="section" id="survey"> </aside><script>document.getElementById('survey').innerHTML = g.survey</script>

<ul id="full-links">
<li>
<p><cite>Developing specifications</cite></p>
<ul>
<li><a href="https://www.w3.org/TR/international-specs/#text_direction">Text direction</a></li>
</ul>
</li>
</ul>

<p>To contribute suggestions, please click on the link <em>Leave a comment</em> in the box to the right.</p>
<p>Thanks to the following contributors to this document: Fuqiao Xue.</p>
</section>

<footer id="thefooter"></footer><script>document.getElementById('thefooter').innerHTML = g.bottomOfPage</script>
<script>completePage()</script>
</body>
</html>
